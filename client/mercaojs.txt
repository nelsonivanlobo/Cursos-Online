
// Add SDK credentials
// REPLACE WITH YOUR PUBLIC KEY AVAILABLE IN: https://developers.mercadopago.com/panel
const mercadopago = new MercadoPago("<PUBLIC_KEY>", { /* la creo en mercadoPago */
    locale: "es-AR", // The most common are: 'pt-BR', 'es-AR' and 'en-US' /* tipo de moneda */
  });

// Handle call to backend and generate preference.
document.getElementById("checkout-btn").addEventListener("click", function () { /* captura el boton */
    $("#checkout-btn").attr("disabled", true);
  
    const orderData = { /* al presionar el boton crea un objeto capturando esas propiedades accediendo al html (innerHTML) */
      quantity: document.getElementById("quantity").value,
      description: document.getElementById("product-description").innerHTML,
      price: document.getElementById("unit-price").innerHTML,
    };
  
    fetch("http://localhost:8080/create_preference", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(orderData),
    })
      .then(function (response) {
        return response.json();
      })
      .then(function (preference) {
        createCheckoutButton(preference.id);
  
        $(".shopping-cart").fadeOut(500);
        setTimeout(() => {
          $(".container_payment").show(500).fadeIn();
        }, 500);
      })
      .catch(function () {
        alert("Unexpected error");
        $("#checkout-btn").attr("disabled", false);
      });
  });




  function createCheckoutButton(preferenceId) {
    // Initialize the checkout
    const bricksBuilder = mercadopago.bricks(); /* es lo que genera la integracion y el fomulario */
  
    const renderComponent = async (bricksBuilder) => {
      if (window.checkoutButton) window.checkoutButton.unmount(); /* monta la primer ejecucion sobre las demas en caso de que presione muchas veces o dos veces sin querer el boton comprar */
      await bricksBuilder.create(
        "wallet",
        "button-checkout", // class/id where the payment button will be displayed /* toma el ide en html y generara el formulario en ese lugar */
        {
          initialization: {
            preferenceId: preferenceId,
          },
          customization: {
            // Custom style example after migration process
            // theme: "dark",
            // customStyle: {
            //   valueProp: "practicality",
            //   valuePropColor: "black",
            // },
          },
          callbacks: {
            onError: (error) => console.error(error),
            onReady: () => {},
          },
        }
      );
    };
    window.checkoutButton = renderComponent(bricksBuilder);
  }
/* para realizar un pago de mentira en la exposicion debo usar las credenciales de prueba */
/* para realizar un pago real debo usar las credenciales de producción */




















cursos




            <!-- Course 1 -->
            <div class="col-md-6 col-lg-4">
                <div class="card course-card">
                    <img src="https://cdn.pixabay.com/photo/2021/11/14/18/36/telework-6795505_960_720.jpg" class="card-img-top" alt="Contabilidad Fiscal">
                    <div class="course-header">
                        <h5>Introducción a la Contabilidad Básica</h5>
                        <!-- <span class="badge bg-warning text-dark">Más vendido</span> -->
                    </div>
                    <div class="card-body">
                        <div class="course-price">$299.00</div>
                        <div class="course-duration"><i class="far fa-clock me-1"></i>Duración: 3 meses</div>
                        <p class="card-text">Aprendé los conceptos esenciales de la contabilidad para gestionar finanzas personales o emprender con seguridad y organización.</p>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-users me-1 text-muted"></i><a href="${course.ruta_pdf}" target="_blank" class="btn text-muted">Mas info...</a><!-- <span>Clase: 2 por semana</span> -->   <!-- Inicia 20/05/25 --> <!-- <a href="" class="btn">Mas info...</a> -->
                                <!-- <small class="text-muted"><i class="fas fa-users me-1"></i>Inicia el 20/06/25</small> --> <!-- Inicia el 20/06/25 -->
                            </div>
                            <button class="btn btn-danger btn-comprar" data-bs-toggle="modal" data-bs-target="#inscripcionModal" data-curso="Contabilidad Fiscal" data-precio="299">Comprar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course 2 -->
            <div class="col-md-6 col-lg-4">
                <div class="card course-card">
                    <img src="https://images.pagina12.com.ar/styles/focal_3_2_470x313/public/2024-01/802815-afip-20monotributo.jpg?itok=8o9cHRZT" class="card-img-top" alt="NIIF para PYMES">
                    <div class="course-header">
                        <h5>El ABC de ARCA</h5>
                    </div>
                    <div class="card-body">
                        <div class="course-price">$249.00</div>
                        <div class="course-duration"><i class="far fa-clock me-1"></i>Duración: 4 meses</div>
                        <p class="card-text">Domina conceptos básicos, aplicaciones prácticas y estrategias clave para una gestión eficiente y profesional.</p>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-users me-1 text-muted"></i><a href="https://docs.google.com/document/d/1IyNJtRCTaF-OW3gJUL53o04fm6bjAvQpYmgMgxZ6W9Q/edit?usp=sharing" class="btn text-muted">Mas info...</a> <!-- <small class="text-muted"><i class="fas fa-users me-1"></i>Pendiente</small> -->
                            </div>
                            <button class="btn btn-danger btn-comprar" data-bs-toggle="modal" data-bs-target="#inscripcionModal" data-curso="NIIF para PYMES" data-precio="249">Comprar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course 3 -->
            <div class="col-md-6 col-lg-4">
                <div class="card course-card">
                    <img src="https://cdn.pixabay.com/photo/2015/05/31/13/45/working-791849_1280.jpg" class="card-img-top" alt="Consolidación de Estados Financieros">
                    <div class="course-header">
                        <h5>Planificación Financiera Personal</h5>
                    </div>
                    <div class="card-body">
                        <div class="course-price">$329.00</div>
                        <div class="course-duration"><i class="far fa-clock me-1"></i>Duración: 3 meses</div>
                        <p class="card-text">Descubrí cómo organizar tus ingresos, controlar gastos y alcanzar tus metas financieras con una planificación sencilla y efectiva.</p>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-users me-1 text-muted"></i><a href="https://docs.google.com/document/d/1IyNJtRCTaF-OW3gJUL53o04fm6bjAvQpYmgMgxZ6W9Q/edit?usp=sharing" class="btn text-muted">Mas info...</a>
                            </div>
                            <button class="btn btn-danger btn-comprar" data-bs-toggle="modal" data-bs-target="#inscripcionModal" data-curso="Consolidación de Estados Financieros" data-precio="329">Comprar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course 4 -->
            <div class="col-md-6 col-lg-4">
                <div class="card course-card">
                    <img src="https://cdn.pixabay.com/photo/2015/01/28/22/20/bookkeeping-615384_960_720.jpg" class="card-img-top" alt="Contabilidad de Costos">
                    <div class="course-header">
                        <h5>Liquidación de sueldos</h5>
                    </div>
                    <div class="card-body">
                        <div class="course-price">$279.00</div>
                        <div class="course-duration"><i class="far fa-clock me-1"></i>Duración: 5 meses</div>
                        <p class="card-text">Curso práctico de liquidación de sueldos: aprende cálculos, normativa laboral y gestión salarial para contadores profesionales.</p>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-users me-1 text-muted"></i><a href="https://docs.google.com/document/d/1IyNJtRCTaF-OW3gJUL53o04fm6bjAvQpYmgMgxZ6W9Q/edit?usp=sharing" class="btn text-muted">Mas info...</a>
                            </div>
                            <button class="btn btn-danger btn-comprar" data-bs-toggle="modal" data-bs-target="#inscripcionModal" data-curso="Contabilidad de Costos" data-precio="279">Comprar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course 5 -->
            <div class="col-md-6 col-lg-4">
                <div class="card course-card">
                    <img src="https://res.cdn.office.net/midgard/versionless/apphome/app-home_v1_9843293c2e70c38f66d1a9d3340a5252.webp" class="card-img-top" alt="Excel para Contadores">
                    <div class="course-header">
                        <h5>Excel para Contadores</h5>
                        <!-- <span class="badge bg-info text-dark">Nuevo</span> -->
                    </div>
                    <div class="card-body">
                        <div class="course-price">$199.00</div>
                        <div class="course-duration"><i class="far fa-clock me-1"></i>Duración: 3 meses</div>
                        <p class="card-text">Dominá herramientas clave de Excel para agilizar cálculos, reportes y análisis contables de manera práctica y eficiente.</p>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-users me-1 text-muted"></i><a href="https://docs.google.com/document/d/1IyNJtRCTaF-OW3gJUL53o04fm6bjAvQpYmgMgxZ6W9Q/edit?usp=sharing" class="btn text-muted">Mas info...</a>
                            </div>
                            <button class="btn btn-danger btn-comprar" data-bs-toggle="modal" data-bs-target="#inscripcionModal" data-curso="Excel para Contadores" data-precio="199">Comprar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course 6 -->
            <div class="col-md-6 col-lg-4">
                <div class="card course-card">
                    <img src="https://cdn.pixabay.com/photo/2020/01/19/04/29/office-4776820_960_720.jpg" class="card-img-top" alt="Auditoría Interna">
                    <div class="course-header">
                        <h5>Auditoría Interna</h5>
                    </div>
                    <div class="card-body">
                        <div class="course-price">$349.00</div>
                        <div class="course-duration"><i class="far fa-clock me-1"></i>Duración: 6 meses</div>
                        <p class="card-text">Explorá técnicas fundamentales de auditoría interna para evaluar riesgos, mejorar procesos y garantizar el cumplimiento organizacional.</p>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-users me-1 text-muted"></i><a href="https://docs.google.com/document/d/1IyNJtRCTaF-OW3gJUL53o04fm6bjAvQpYmgMgxZ6W9Q/edit?usp=sharing" class="btn text-muted">Mas info...</a>
                            </div>
                            <button class="btn btn-danger btn-comprar" data-bs-toggle="modal" data-bs-target="#inscripcionModal" data-curso="Auditoría Interna" data-precio="349">Comprar</button>
                        </div>
                    </div>
                </div>
            </div>







<!-- Curso 2 -->
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title" id="misCursosModalLabel">Excel para Contadores</h5>
                        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                    </div>
                    <div class="modal-body">
                        <!-- <p>¡Gracias por tu compra! Ahora tendras acceso los materiales del curso:</p> -->
                        <p>¡Gracias por tu compra! Espéramos que disfrutes de nuestro curso.<span style="font-size: 25px;">☻</span></p>
                        <div class="d-flex flex-wrap gap-2">
                            <a href="javascript:void(0)" class="btn btn-outline-primary">
                                <i class="fas fa-book me-2"></i>Información <!-- el pdf que se carga en mas info -->
                            </a>
                            <a href="javascript:void(0)" class="btn btn-outline-primary">
                                <i class="fas fa-download me-2"></i>Material del curso
                            </a>
<!--                             <a href="javascript:void(0)" class="btn btn-outline-primary">
                                <i class="fas fa-download me-2"></i>Ejercicios prácticos
                            </a> -->
                            <a href="javascript:void(0)" class="btn btn-outline-primary">
                                <i class="fas fa-link me-2"></i>Link de la clase
                            </a>
                        </div>
                    </div>

    <!-- Curso 3 -->
    <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="misCursosModalLabel">Planificación Financiera Personal</h5>
        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
    </div>
    <div class="modal-body">
<!--         <p>¡Gracias por tu compra! Ahora tendras acceso los materiales del curso:</p> -->
<p>¡Gracias por tu compra! Espéramos que disfrutes de nuestro curso.<span style="font-size: 25px;">☻</span></p>
        <div class="d-flex flex-wrap gap-2">
            <a href="javascript:void(0)" class="btn btn-outline-primary">
                <i class="fas fa-book me-2"></i>Información
            </a>
            <a href="https://drive.google.com/drive/folders/1lzq8f4MjRp8Vzo0pEVLuRYY3JUMLmoNQ?usp=drive_link" class="btn btn-outline-primary">
                <i class="fas fa-download me-2"></i>Material del curso     <!-- Material del teorico -->
            </a>
<!--             <a href="https://drive.google.com/drive/folders/1Pehs96ml5UH0rQt0NsUuiL9KucuY1Sa7?usp=drive_link" class="btn btn-outline-primary">
                <i class="fas fa-download me-2"></i>Ejercicios prácticos
            </a> -->
            <a href="https://drive.google.com/drive/folders/1mNpAL8AYbqK7hVMdtZP9bJrGbjC--K-r?usp=drive_link" class="btn btn-outline-primary">
                <i class="fas fa-link me-2"></i>Link de la clase
            </a>
        </div>
    </div>